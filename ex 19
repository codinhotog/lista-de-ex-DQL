CREATE TABLE status_matricula ( 
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, 
    descricao VARCHAR2(50) NOT NULL 
);

CREATE TABLE alunos ( 
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, 
    nome VARCHAR2(100) NOT NULL, 
    status_id NUMBER NOT NULL, 
    FOREIGN KEY (status_id) REFERENCES status_matricula(id) 
);

INSERT INTO status_matricula (descricao) VALUES ('Ativo');

INSERT INTO status_matricula (descricao) VALUES ('Conclu√≠do');

INSERT INTO status_matricula (descricao) VALUES ('Trancado');

INSERT INTO alunos (nome, status_id) VALUES ('Lucas', 1);

INSERT INTO alunos (nome, status_id) VALUES ('Mariana', 1);

INSERT INTO alunos (nome, status_id) VALUES ('Pedro', 2);

INSERT INTO alunos (nome, status_id) VALUES ('Ana', 1);

INSERT INTO alunos (nome, status_id) VALUES ('Beatriz', 3);

INSERT INTO alunos (nome, status_id) VALUES ('Felipe', 1);

INSERT INTO alunos (nome, status_id) VALUES ('Julia', 2);

INSERT INTO alunos (nome, status_id) VALUES ('Rafael', 2);

INSERT INTO alunos (nome, status_id) VALUES ('Carla', 3);

INSERT INTO alunos (nome, status_id) VALUES ('Paula', 1);

SELECT s.descricao AS status, COUNT(a.id) AS numero_alunos 
FROM alunos a 
JOIN status_matricula s ON a.status_id = s.id 
GROUP BY s.descricao 
ORDER BY numero_alunos DESC;
