CREATE TABLE professores ( 
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, 
    nome VARCHAR2(100) NOT NULL 
);

CREATE TABLE disciplinas ( 
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, 
    nome VARCHAR2(100) NOT NULL 
);

CREATE TABLE professores_disciplinas ( 
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, 
    professor_id NUMBER NOT NULL, 
    disciplina_id NUMBER NOT NULL, 
    FOREIGN KEY (professor_id) REFERENCES professores(id), 
    FOREIGN KEY (disciplina_id) REFERENCES disciplinas(id) 
);

CREATE TABLE turmas ( 
    id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, 
    professor_disciplina_id NUMBER NOT NULL, 
    horario TIMESTAMP NOT NULL, 
    FOREIGN KEY (professor_disciplina_id) REFERENCES professores_disciplinas(id) 
);

INSERT INTO professores (nome) VALUES ('Ana Oliveira');

INSERT INTO professores (nome) VALUES ('Carlos Silva');

INSERT INTO professores (nome) VALUES ('Beatriz Santos');

INSERT INTO disciplinas (nome) VALUES ('Matemática');

INSERT INTO disciplinas (nome) VALUES ('Física');

INSERT INTO disciplinas (nome) VALUES ('Química');

INSERT INTO professores_disciplinas (professor_id, disciplina_id) VALUES (1, 1);

INSERT INTO professores_disciplinas (professor_id, disciplina_id) VALUES (2, 2);

INSERT INTO professores_disciplinas (professor_id, disciplina_id) VALUES (3, 3);

INSERT INTO turmas (professor_disciplina_id, horario) VALUES (1, TIMESTAMP '2024-11-01 08:00:00');

INSERT INTO turmas (professor_disciplina_id, horario) VALUES (2, TIMESTAMP '2024-11-01 10:00:00');

INSERT INTO turmas (professor_disciplina_id, horario) VALUES (3, TIMESTAMP '2024-11-01 09:30:00');

SELECT p.nome AS professor, d.nome AS disciplina, t.horario 
FROM turmas t 
JOIN professores_disciplinas pd ON t.professor_disciplina_id = pd.id 
JOIN professores p ON pd.professor_id = p.id 
JOIN disciplinas d ON pd.disciplina_id = d.id 
ORDER BY t.horario;

